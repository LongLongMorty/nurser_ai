# AI智能食谱推荐系统

## 功能概述

AI智能食谱推荐系统集成了DeepSeek大语言模型，为护理中心提供个性化的膳食推荐服务。

## 主要功能

### 1. 智能表单选择
- **菜品类型**：早餐、午餐、晚餐、加餐
- **营养要求**：高蛋白、低盐、低糖、低脂、高纤维
- **适用人群**：糖尿病、高血压、心脏病、肾病、一般老人

### 2. 实时AI推荐生成
- 基于表单选择实时生成个性化菜品推荐
- 支持DeepSeek API直连和后端代理两种模式（大部分时间直连即可）
- 智能提示用户当前可生成的推荐类型

### 3. 标准化数据输出
每个推荐都会生成符合`meal_config`表结构的完整数据：
- 菜品基本信息（名称、类型、描述）
- 营养成分（热量、蛋白质、脂肪、碳水化合物）
- 制作方法和营养分析
- 适用人群和饮食禁忌
- AI评分和推荐理由

### 4. 推荐管理
- 推荐列表展示和筛选
- 支持采纳、拒绝推荐操作
- 批量操作支持
- 用户反馈收集

### 5. 数据记录
- 最近生成推荐记录展示
- 完整的AI推荐日志记录

## 技术架构

### 前端实现
- **框架**：Vue 3 + TypeScript + Element Plus
- **API集成**：支持DeepSeek直连和后端代理
- **状态管理**：响应式数据管理
- **UI/UX**：现代化界面设计，支持实时反馈

### 后端API
- **推荐生成**：`POST /ai/recommendation/generate`
- **推荐列表**：`GET /ai/recommendation/list`
- **推荐操作**：`POST /ai/recommendation/{id}/adopt|reject`
- **批量操作**：`POST /ai/recommendation/batch/adopt|reject`
- **反馈提交**：`POST /ai/recommendation/feedback`

### 数据库设计
1. **ai_recommendation_temp** - AI推荐临时表
2. **ai_recommendation_history** - AI推荐采纳历史表
3. **ai_personalized_menu** - 客户个性化菜单表
4. **ai_call_log** - AI调用日志表

## 使用流程

1. **选择条件**：在表单中选择菜品类型、营养要求、适用人群
2. **生成推荐**：点击"生成推荐"按钮，AI将实时生成个性化菜品
3. **查看结果**：在推荐列表中查看生成的菜品详情
4. **SQL导出**：复制生成的SQL插入语句到数据库
5. **推荐管理**：对推荐进行采纳、拒绝或提供反馈
6. **记录查看**：在"最近生成的推荐"中查看历史记录

## 配置说明

### 环境变量
```bash
# DeepSeek API配置（可选，用于前端直连）
VITE_DEEPSEEK_API_KEY=your_deepseek_api_key
```

### 后端配置
如果使用后端代理模式，需要在后端配置DeepSeek API相关参数。

## 特色亮点

1. **智能化**：基于AI大模型的专业营养推荐
2. **个性化**：根据不同人群定制化推荐
3. **标准化**：输出符合系统表结构的标准数据
4. **可视化**：直观的界面和实时反馈
5. **可扩展**：支持多种AI模型集成
6. **可追溯**：完整的推荐记录和反馈机制

## 更新日志

### v1.0.0 (2025-07-03)
- ✅ 完成DeepSeek AI集成
- ✅ 实现实时推荐生成
- ✅ 支持meal_config表结构输出
- ✅ 添加SQL自动生成功能
- ✅ 实现推荐记录管理
- ✅ 完成数据库表结构设计
- ✅ 优化用户界面和交互体验

## 后续计划

1. 集成更多AI模型（GPT、文心一言等）
2. 添加图片生成功能
3. 实现营养成分可视化图表
4. 支持批量导入/导出功能
5. 添加推荐效果评估机制
